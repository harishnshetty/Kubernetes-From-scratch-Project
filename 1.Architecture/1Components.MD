
### **CoreDNS**

**What it does:**
Provides **DNS service inside the Kubernetes cluster** so Pods can find each other by name.
CoreDNS is the **internal DNS of Kubernetes**.
It allows **Pods and Services to find and talk to each other using names instead of IPs**, which constantly change.

**Example:**
`frontend` Pod connects to `backend.default.svc.cluster.local` without knowing IPs.


---

## âœ… Real-World Use Case: Microservices Communication

### Scenario

You have an **E-commerce application** running on Kubernetes:

* `frontend` (React)
* `backend` (Node.js / Java API)
* `database` (MongoDB)

Each component runs in different Pods, and Pods can restart at any time â†’ **IP addresses change**.

---

### âŒ Without CoreDNS (problem)

* Backend Pod IP changes after restart
* Frontend still points to old IP
* Application breaks âŒ

---

### âœ… With CoreDNS (solution)

You create a Kubernetes **Service** for backend:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: backend
spec:
  selector:
    app: backend
  ports:
  - port: 3000
```

CoreDNS automatically creates a DNS entry:

```
backend.default.svc.cluster.local
```

---

### ğŸ”„ How traffic flows

1. Frontend sends request to:

   ```
   http://backend:3000
   ```
2. CoreDNS resolves `backend` â†’ Service IP
3. Service load-balances traffic to backend Pods
4. Application works even if Pods restart âœ…

---

## ğŸ“Œ Another Real-World Example: Database Access

Backend connects to database using DNS:

```env
DB_HOST=mongodb.default.svc.cluster.local
```

Even if MongoDB Pods restart or scale, **no config change needed**.

---

## ğŸš€ Enterprise Use Case

* Used in **microservices, EKS, GKE, AKS**
* Mandatory for **service discovery**
* Critical for **zero-downtime deployments**
* Required for **HPA, Ingress, Gateway API**

## ğŸ¯ Interview One-Liner

**CoreDNS enables service discovery in Kubernetes by resolving service names to IPs, allowing microservices to communicate reliably even when Pods change.**



---

### **storage-provisioner**

**What it does:**
Automatically **creates Persistent Volumes (PV)** when a PVC is requested (Dynamic Provisioning).

**Example:**
PVC â†’ automatically creates an EBS volume in AWS or local disk in Minikube.

---

### **ngf-nginx-gateway-fabric**

**What it does:**
An **NGINX-based Gateway API implementation** for managing traffic using Kubernetes Gateway API.

**Example:**
Routes HTTP traffic to multiple services using `Gateway` and `HTTPRoute` instead of Ingress.

---

### **kubelet**

**What it does:**
Runs on every worker node and **ensures Pods and containers are running** as defined.

**Example:**
Starts containers, reports Pod status to API Server, restarts failed containers.

---

### **kube-proxy**

**What it does:**
Handles **network routing and load balancing** for Kubernetes Services.

**Example:**
A request to `ClusterIP` is forwarded to one of the backend Pods.

---

### **kube-scheduler**

**What it does:**
Decides **which node a Pod should run on** based on resources and constraints.

**Example:**
Schedules a Pod on the node with enough CPU and memory.

---

### **kube-controller-manager**

**What it does:**
Runs controllers that **maintain the desired state** of the cluster.

**Example:**
If a Pod crashes, the ReplicaSet controller creates a new Pod automatically.

---

### **kube-apiserver**

**What it does:**
The **main entry point** of the Kubernetes cluster; all requests go through it.

**Example:**
`kubectl get pods` â†’ API Server â†’ etcd â†’ response returned.

---

### **etcd**

**What it does:**
A **distributed key-value store** that stores all cluster state and configuration.

**Example:**
Stores Pod specs, secrets, ConfigMaps, and node information.

---

### **kindnet**

**What it does:**
A **CNI (Container Network Interface) plugin** used by KIND clusters for Pod networking.

**Example:**
Assigns IPs to Pods and enables Pod-to-Pod communication.

---

### **metrics-server**

**What it does:**
Collects **CPU and memory usage metrics** from nodes and Pods.

**Example:**
Used by `kubectl top pods` and Horizontal Pod Autoscaler (HPA).

---

### ğŸ” **storage-provisioner** (duplicate)

Same as above â€“ enables **dynamic storage creation** for PVCs.

---

### ğŸ” **ngf-nginx-gateway-fabric** (duplicate)

Same as above â€“ provides **Gateway API-based traffic management** using NGINX.



---

## ğŸ§  **Control Plane Components**

(Manage and control the Kubernetes cluster)

* **kube-apiserver** â€“ Central API entry point for all cluster operations.
* **etcd** â€“ Distributed key-value store holding cluster state and configuration.
* **kube-scheduler** â€“ Assigns Pods to suitable worker nodes.
* **kube-controller-manager** â€“ Runs controllers to maintain desired cluster state.

---

## ğŸ–¥ï¸ **Node (Worker) Components**

(Run applications and handle networking on worker nodes)

* **kubelet** â€“ Ensures Pods and containers are running as defined.
* **kube-proxy** â€“ Handles Service networking and load balancing.
* **kindnet (CNI)** â€“ Provides Pod-to-Pod networking and IP assignment.

---

## ğŸ§© **Add-ons / Cluster Services**

(Extend Kubernetes functionality)

* **CoreDNS** â€“ Provides DNS-based service discovery inside the cluster.
* **metrics-server** â€“ Collects CPU and memory metrics for Pods and nodes.
* **storage-provisioner** â€“ Enables dynamic Persistent Volume provisioning.
* **ngf-nginx-gateway-fabric** â€“ Implements Gateway API using NGINX for traffic routing.

---

