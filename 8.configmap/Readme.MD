# ğŸš€ Project Name

**Example:** `k8s-configmap-secret-demo`

> A Kubernetes application demonstrating best practices for ConfigMaps, Secrets, and Deployments using YAML manifests.

---

## ğŸ“Œ Table of Contents

* Overview
* Architecture Diagram
* Folder Structure
* Prerequisites
* Kubernetes Manifests

  * ConfigMap
  * Secret
  * Deployment
* Deployment Steps
* Verification
* Cleanup
* Best Practices

---

## ğŸ§© Overview

This project demonstrates:

* Externalized configuration using **ConfigMaps**
* Secure credential management using **Secrets**
* Application deployment using **Deployments**
* Environment variable injection into containers

Use case:

> Ideal for **two-tier or microservice apps** running on Kubernetes clusters (Minikube, EKS, AKS, GKE).

---

## ğŸ—ï¸ Architecture Diagram

![Image](https://k21academy.com/wp-content/uploads/2020/10/82afa1a7628ff95d-1.jpg)

![Image](https://miro.medium.com/v2/resize%3Afit%3A1400/0%2AeRnMRGh_zu_GHq07)

![Image](https://kubernetes.io/images/docs/components-of-kubernetes.svg)

### Architecture Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User/App  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kubernetes Deployment     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Pod                  â”‚ â”‚
â”‚ â”‚  â”œâ”€ ConfigMap        â”‚ â”‚
â”‚ â”‚  â”œâ”€ Secret           â”‚ â”‚
â”‚ â”‚  â””â”€ Container App    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Folder Structure

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ k8s
â”‚   â”œâ”€â”€ configmap.yml
â”‚   â”œâ”€â”€ secret.yml
â”‚   â””â”€â”€ deployment.yml
```

---

## âš™ï¸ Prerequisites

* Kubernetes Cluster (Minikube / EKS / Kind)
* kubectl configured
* Docker image available

Check:

```bash
kubectl get nodes
```

---

## ğŸ“¦ Kubernetes Manifests

---

### ğŸ”¹ ConfigMap (`configmap.yml`)

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_ENV: "production"
  APP_PORT: "8080"
```

---

### ğŸ”¹ Secret (`secret.yml`)

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: app-secret
type: Opaque
data:
  DB_USERNAME: YWRtaW4=     # admin
  DB_PASSWORD: cGFzc3dvcmQ= # password
```

> ğŸ” Secrets must be base64 encoded:

```bash
echo -n admin | base64
```

---

### ğŸ”¹ Deployment (`deployment.yml`)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: demo-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: demo
  template:
    metadata:
      labels:
        app: demo
    spec:
      containers:
      - name: demo-container
        image: nginx:latest
        ports:
        - containerPort: 80
        env:
        - name: APP_ENV
          valueFrom:
            configMapKeyRef:
              name: app-config
              key: APP_ENV
        - name: DB_USERNAME
          valueFrom:
            secretKeyRef:
              name: app-secret
              key: DB_USERNAME
```

---

## ğŸš€ Deployment Steps

Apply resources in order:

```bash
kubectl apply -f configmap.yml
kubectl apply -f secret.yml
kubectl apply -f deployment.yml
```

---

## ğŸ” Verification

```bash
kubectl get pods
kubectl describe pod <pod-name>
```

Check environment variables:

```bash
kubectl exec -it <pod-name> -- env
```

---

## ğŸ§¹ Cleanup

```bash
kubectl delete -f deployment.yml
kubectl delete -f configmap.yml
kubectl delete -f secret.yml
```

---

## âœ… Best Practices

âœ” Never commit plaintext secrets
âœ” Use External Secrets in production (AWS Secrets Manager, Vault)
âœ” Separate manifests per environment (dev/stage/prod)
âœ” Use Helm or Kustomize for scaling
âœ” Enable RBAC and Network Policies

