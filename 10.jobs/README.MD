## ğŸ§  Kubernetes Workloads â€“ Overview

Kubernetes workloads define **how containers run** inside the cluster.

| Workload          | Purpose                   |
| ----------------- | ------------------------- |
| Pod               | Smallest deployable unit  |
| ReplicaController | Legacy replication        |
| ReplicaSet        | Replica management        |
| Deployment        | Rolling updates & scaling |
| Job               | One-time task             |
| CronJob           | Scheduled task            |
| DaemonSet         | Runs on every node        |
| Init Container    | Pre-run setup             |
| Sidecar           | Supporting container      |

---

## ğŸ—ï¸ Kubernetes Workloads Architecture

![Image](https://www.cherryservers.com/v3/assets/blog/2025-05-19/img-01.png)

![Image](https://storage.googleapis.com/cdn.thenewstack.io/media/2017/11/07751442-deployment.png)

![Image](https://miro.medium.com/1%2A-1Bz713XTxzs3KBi1lEAXg.png)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   kubectl   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kubernetes Control Plane           â”‚
â”‚ â”œâ”€ Deployment â†’ ReplicaSet â†’ Pod   â”‚
â”‚ â”œâ”€ Job â†’ Pod                        â”‚
â”‚ â”œâ”€ CronJob â†’ Job â†’ Pod             â”‚
â”‚ â”œâ”€ DaemonSet â†’ Pod (per node)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Workload Types Explained (With YAML)

---

### ğŸ”¹ 1. Pod (`pod.yml`)

**Smallest unit in Kubernetes**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: demo-pod
spec:
  containers:
  - name: nginx
    image: nginx
```

âœ” Not self-healing
âŒ Not recommended for production

---

### ğŸ”¹ 2. ReplicaController (`replicacontoller.yml`)

> âš ï¸ **Deprecated** â€“ replaced by ReplicaSet

```yaml
kind: ReplicationController
spec:
  replicas: 2
```

âœ” Legacy clusters only

---

### ğŸ”¹ 3. ReplicaSet (`replicaset.yml`)

Ensures **fixed number of pods**

```yaml
kind: ReplicaSet
spec:
  replicas: 3
```

âœ” Used internally by Deployments

---

### ğŸ”¹ 4. Deployment (`deployment.yml`)

**Most common production workload**

```yaml
kind: Deployment
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
```

âœ” Rolling updates
âœ” Rollbacks
âœ” Auto-healing

---

### ğŸ”¹ 5. Job (`job.yml`)

Runs **once and exits**

```yaml
kind: Job
spec:
  completions: 1
```

âœ” DB migrations
âœ” Backup jobs

---

### ğŸ”¹ 6. CronJob (`cron-job.yml`)

Scheduled Jobs (Linux cron style)

```yaml
kind: CronJob
spec:
  schedule: "*/5 * * * *"
```

âœ” Log cleanup
âœ” Reports
âœ” Batch processing

---

### ğŸ”¹ 7. DaemonSet (`daemonset.yml`)

Runs **one pod per node**

```yaml
kind: DaemonSet
```

âœ” Log collectors
âœ” Monitoring agents
âœ” Security agents

---

### ğŸ”¹ 8. Init Container (`init-container.yml`)

Runs **before app container starts**

```yaml
initContainers:
- name: init-db
  image: busybox
```

âœ” DB wait
âœ” Config generation

---

### ğŸ”¹ 9. Sidecar Container (`sidecar.yml`)

Runs **alongside main container**

```yaml
containers:
- name: app
- name: sidecar
```

âœ” Logging
âœ” Proxy
âœ” Metrics exporter

---

## ğŸ”„ Execution Flow (Very Important)

```
Init Container â†’ App Container + Sidecar
                    â”‚
              Liveness / Readiness
```

```
CronJob â†’ Job â†’ Pod â†’ Complete â†’ Exit
```

---

## ğŸš€ Apply All Manifests

```bash
kubectl apply -f pod.yml
kubectl apply -f replicaset.yml
kubectl apply -f deployment.yml
kubectl apply -f job.yml
kubectl apply -f cron-job.yml
kubectl apply -f daemonset.yml
kubectl apply -f init-container.yml
kubectl apply -f sidecar.yml
```

---

## ğŸ” Verification (SRE Commands)

```bash
kubectl get pods
kubectl get deploy
kubectl get rs
kubectl get jobs
kubectl get cronjobs
kubectl get ds
```

Describe deeply:

```bash
kubectl describe pod <pod-name>
```

---

## ğŸŒ Real-World Use Cases

| Scenario           | Workload       |
| ------------------ | -------------- |
| Web App            | Deployment     |
| Database Migration | Job            |
| Daily Backup       | CronJob        |
| Logging Agent      | DaemonSet      |
| App Bootstrap      | Init Container |
| Log Shipping       | Sidecar        |

---

## âœ… Best Practices (Production)

âœ” Never use Pods directly in prod
âœ” Always use Deployments
âœ” Prefer CronJob over OS cron
âœ” DaemonSet for node-level tasks
âœ” Init containers for dependencies
âœ” Sidecars for observability

